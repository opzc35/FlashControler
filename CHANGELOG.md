# 更新日志

本文档记录FlashControler的所有版本更新。

## [1.1.0] - 2024-11

### 新增
- 📥 **文件下载功能（Linux到Windows）**
  - 支持从远程Linux服务器下载文件到本地Windows
  - 实时传输进度显示
  - 支持大文件下载
  - 自动错误处理和重试机制

- 📂 **文件浏览器**
  - 可视化远程文件系统浏览
  - 显示文件和文件夹列表
  - 显示文件大小信息
  - 支持目录导航（上级目录、子目录）
  - 双击文件即可下载
  - 双击文件夹进入目录

- 🗂️ **批量文件传输**
  - 支持多文件同时选择下载
  - 文件浏览器支持Ctrl/Shift多选
  - 批量下载到指定目录
  - 实时显示每个文件的传输进度

- ⚡ **传输速度优化**
  - 增大数据块大小至64KB（原8KB）
  - 优化缓冲区管理
  - 提升传输效率约8倍

- 🔒 **IP黑名单系统**
  - 认证失败10次自动封锁IP
  - 实时显示连接和认证状态
  - 支持手动封锁/解锁IP
  - 黑名单数据持久化存储
  - 命令行管理工具 `manage_ip.py`

### 改进
- 📊 **认证日志增强**
  - 显示每次连接的IP地址
  - 显示认证成功/失败状态
  - 显示失败次数统计
  - 使用图标增强可读性

- 🎨 **UI界面改进**
  - 文件传输标签页增加下载区域
  - 添加"浏览远程文件"按钮
  - 统一上传和下载进度显示
  - 改进传输日志格式

- 🔧 **代码简化**
  - 完全删除Tkinter版本客户端
  - 统一使用PyQt5界面
  - 精简文档文件
  - 代码量减少17%

### 技术改进
- 新增协议消息类型：`MSG_FILE_DOWNLOAD`、`MSG_FILE_LIST`
- 服务端文件处理器支持文件发送
- 客户端连接管理器支持文件接收
- 异步文件列表加载
- 线程安全的队列通信

---

## [1.0.3] - 2024-11-28

### 新增
- ⌨️ **命令历史记忆功能**
  - 使用 ↑ (上箭头) 浏览之前执行的命令（从新到旧）
  - 使用 ↓ (下箭头) 浏览历史命令（从旧到新）
  - 📜 **历史选择对话框** - 点击"历史"按钮或按 Ctrl+H 打开
  - 从列表中直接选择历史命令
  - 双击命令快速使用
  - 自动保存最近100条命令
  - 智能去重：避免连续重复命令
  - 自动移除旧的相同命令，保持历史简洁
  - PyQt5和Tkinter客户端均已实现

### 改进
- 🎯 改进终端输入体验
- 📝 命令输入框提示文本更新，说明快捷键用法
- 🖱️ 多种选择方式：上下箭头、按钮、快捷键

---

## [1.0.2] - 2024-11-28

### 修复
- 🐛 **修复ANSI转义序列显示问题**
  - 客户端添加ANSI转义序列过滤功能
  - 解决 `[?2004h`、`[0m`、`[31m` 等控制码显示问题
  - 过滤bracketed paste mode控制序列
  - 改进终端输出可读性
  - PyQt5和Tkinter客户端均已修复

### 技术细节
- 使用正则表达式过滤常见ANSI/VT100控制序列
- 支持CSI、OSC、私有模式等多种序列类型
- 保持UTF-8编码的同时移除不可见控制字符

---

## [1.0.1] - 2024-11-27

### 修复
- 🐛 **修复终端中文乱码问题**
  - 服务端自动设置UTF-8 locale（zh_CN.UTF-8）
  - 服务端添加locale回退机制（en_US.UTF-8）
  - 客户端改进编码解码（UTF-8 → GBK → Replace）
  - 客户端使用支持中文的等宽字体
  - 详见 [ENCODING_FIX.md](ENCODING_FIX.md)

### 改进
- 📝 配置文件添加详细注释，标注服务端/客户端配置
- 📚 新增 [CONFIG.md](CONFIG.md) 配置详细说明文档
- 🌍 改善对中国大陆用户的支持

---

## [1.0.0] - 2024-11-27

### 首次发布

#### 新增功能
- ✨ 远程终端访问功能
  - 从Windows客户端直接连接Linux主机终端
  - 实时命令执行和输出显示
  - 支持所有标准bash命令

- ✨ 文件传输功能
  - Windows到Linux的文件上传
  - 可指定目标目录
  - 实时进度显示
  - 支持大文件传输

- ✨ 安全认证系统
  - 密码保护连接
  - 认证失败自动断开
  - 可配置密码

- ✨ 自动更新系统
  - 启动时自动检查更新
  - 从GitHub Releases获取版本信息
  - 一键跳转下载页面

- ✨ 双GUI界面选择
  - PyQt5现代化界面（推荐）
  - tkinter基础界面（备选）

#### 技术特性
- 基于TCP Socket的可靠通信
- 自定义二进制传输协议
- 多线程处理，不阻塞界面
- 模块化设计，易于扩展

#### 文档
- 完整的README.md
- 详细的INSTALL.md安装指南
- FEATURES.md功能特性说明
- 代码注释完善

---

## 开发计划

### [1.2.0] - 计划中

#### 计划功能
- [ ] TLS/SSL加密通信
- [ ] 多终端会话支持
- [ ] 终端颜色支持（完整ANSI）

### [2.0.0] - 远期计划

#### 计划功能
- [ ] 多服务器管理
- [ ] 系统监控面板
- [ ] 日志查看器
- [ ] 打包为独立可执行文件
- [ ] 跨平台支持（Mac）

---

## 版本号说明

使用语义化版本号（Semantic Versioning）：`主版本号.次版本号.修订号`

- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能新增
- **修订号**：向下兼容的问题修正

---

## 贡献

欢迎提交Issue和Pull Request！

参与方式：
0. 现提一个issues看有没有类似请求或已实现功能
1. Fork本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启Pull Request

---

## 反馈

如有问题或建议：
- 提交Issue: https://github.com/opzc35/FlashControler/issues
- 发送邮件: opzc35@gmail.com
